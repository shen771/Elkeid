(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{164:function(e,t,n){"use strict";n.r(t);n(655);var a,r=n(645),c=(n(656),n(663)),o=(n(303),n(88)),u=n(41),i=n.n(u),l=n(20),s=n.n(l),d=n(578),m=n.n(d),f=n(26),p=n.n(f),b=n(0),v=n.n(b),g=n(579),O=n(601),N=n(556),_="/data00/webprojectdev/hids_open/src/pages/task-list/edit-task-modal/index.tsx",h=g.a.div(a||(a=m()(["\n  .title {\n    color: #4e5969;\n  }\n  .slider {\n    display: flex;\n    align-items: center;\n    margin: 20px 0;\n\n    color: #4e5969;\n  }\n  .desc {\n    color: #86909c;\n  }\n"])));t.default=function(e){var t=e.visible,n=e.data,a=e.handleConfirm,u=e.handleCancel,l=Object(b.useMemo)((function(){var e,t;return(null!==(e=null==n?void 0:n.sub_task_failed)&&void 0!==e?e:0)+(null!==(t=null==n?void 0:n.sub_task_succeed)&&void 0!==t?t:0)}),[n]),d=Object(b.useState)(1),m=s()(d,2),f=m[0],g=m[1],j=Object(b.useMemo)((function(){return Math.ceil(f/(null==n?void 0:n.id_count)*100)}),[f,n]);Object(b.useEffect)((function(){g(t&&l||1)}),[t,n]);var k=function(){var e=i()(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f-l!=0){e.next=3;break}return o.a.error("下发主机数不能为0"),e.abrupt("return");case 3:return e.next=5,Object(N.OperateTask)({data:{task_id:null==n?void 0:n.task_id,action:"run",concurrence:10,run_number:f-l}});case 5:a();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return v.a.createElement(O.b,{visible:t,onCancel:u,onOk:k,style:{width:400},title:"运行任务",__source:{fileName:_,lineNumber:68,columnNumber:5}},v.a.createElement(h,{__source:{fileName:_,lineNumber:75,columnNumber:7}},v.a.createElement("div",{className:"title",__source:{fileName:_,lineNumber:76,columnNumber:9}},l?"当前任务对应 ".concat(null==n?void 0:n.id_count," 台主机，已成功下发 ").concat(l," 台主机（").concat(Math.ceil(l/(null==n?void 0:n.id_count)*100),"%），请继续设置下发主机数："):"请设置任务下发主机数："),v.a.createElement("div",{className:"slider",__source:{fileName:_,lineNumber:85,columnNumber:9}},v.a.createElement("span",{style:{marginRight:16},__source:{fileName:_,lineNumber:86,columnNumber:11}},"下发主机数"),v.a.createElement(c.a,{min:0,max:null==n?void 0:n.id_count,value:f,onChange:function(e){e>=l&&g(e)},formatTooltip:function(e){return"".concat(e," 台主机")},style:{width:180},__source:{fileName:_,lineNumber:87,columnNumber:11}}),v.a.createElement(r.a,{min:0,max:null==n?void 0:n.id_count,value:f,onChange:function(e){e>=l&&g(e)},style:{width:65,marginLeft:16},__source:{fileName:_,lineNumber:99,columnNumber:11}}),v.a.createElement("span",{style:{marginLeft:"4px"},__source:{fileName:_,lineNumber:110,columnNumber:11}},"台")),v.a.createElement("div",{className:"desc",__source:{fileName:_,lineNumber:112,columnNumber:9}},l?v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{__source:{fileName:_,lineNumber:117,columnNumber:15}},"点击确定后，再下发 ".concat(f-l," 台主机")),v.a.createElement("div",{__source:{fileName:_,lineNumber:118,columnNumber:15}},"一共下发 ".concat(f," 台主机（").concat(j,"%）"))):"点击确定后，将下发 ".concat(f," 台主机（").concat(j,"%），运行完成后自动暂停。"))))}},556:function(e,t,n){"use strict";n.r(t),n.d(t,"TaskStatusEunm",(function(){return a})),n.d(t,"SubTaskStatusEnum",(function(){return r})),n.d(t,"TaskTypeEunm",(function(){return c})),n.d(t,"GetTaskList",(function(){return u})),n.d(t,"GetTaskInfo",(function(){return i})),n.d(t,"GetSubTaskList",(function(){return l})),n.d(t,"GetTaskHostStatus",(function(){return s})),n.d(t,"OperateTask",(function(){return d})),n.d(t,"CreateAgentTask",(function(){return m})),n.d(t,"CreatePluginTask",(function(){return f})),n.d(t,"GetModuleId",(function(){return p}));var a,r,c,o=n(40);!function(e){e.running="running",e.created="created",e.finished="finished",e.cancelled="cancelled"}(a||(a={})),function(e){e.created="created",e.running="running",e.failed="failed",e.succeed="succeed"}(r||(r={})),function(e){e.plu_update="plu_update",e.plu_install="plu_install",e.plu_uninstall="plu_uninstall",e.agt_update="agt_update",e.agt_reboot="agt_reboot"}(c||(c={}));var u=function(e){var t=e.data,n=e.params;return Object(o.b)({method:"post",url:"/api/v6/agent/getTaskList",data:t,params:n},"获取任务列表")},i=function(e){var t=e.params;return Object(o.b)({method:"get",url:"/api/v6/agent/getTask/".concat(t.task_id)},"获取任务基本信息")},l=function(e){var t=e.data,n=e.params;return Object(o.b)({method:"post",url:"/api/v6/agent/getSubTaskList",data:t,params:n},"获取子任务列表")},s=function(e){var t=e.data;return Object(o.b)({method:"post",url:"/api/v6/agent/GetErrorHostNum",data:t},"获取创建任务主机状态",!1,!1)},d=function(e){var t=e.data;return Object(o.b)({method:"post",url:"/api/v6/agent/controlTask",data:t},"运行任务",!0)},m=function(e){var t=e.data;return Object(o.b)({method:"post",url:"/api/v6/agent/createAgentTask",data:t},"创建agent任务",!0)},f=function(e){var t=e.data;return Object(o.b)({method:"post",url:"/api/v6/agent/createPluTask",data:t},"创建插件任务",!0)},p=function(e){var t=e.data;return Object(o.b)({method:"post",url:"/api/v6/module/GetModuleId",data:t},"获取组件id",!1,!1)}},601:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a,r,c=n(5),o=n.n(c),u=n(210),i=n.n(u),l=(n(575),n(576)),s=n(578),d=n.n(s),m=n(0),f=n.n(m),p=n(579),b=["children"],v=Object(p.a)(l.a)(a||(a=d()(["\n  .arco-modal-header .arco-modal-title {\n    text-align: left;\n  }\n"])));!function(e){e.add="add",e.edit="edit"}(r||(r={}));t.b=function(e){var t=e.children,n=i()(e,b);return f.a.createElement(v,o()({},n,{__source:{fileName:"/data00/webprojectdev/hids_open/src/components/common/modal/index.tsx",lineNumber:20,columnNumber:10}}),t)}},620:function(e,t,n){"use strict";var a=n(5),r=n.n(a),c=n(4),o=n.n(c),u=n(0),i=n.n(u),l=n(6);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){var n=Object(u.useContext)(l.a).prefixCls,a=e.spin,c=e.className,o=d(d({ref:t},e),{},{className:"".concat(c?c+" ":"").concat(n,"-icon ").concat(n,"-icon-plus")});return a&&(o.className="".concat(o.className," ").concat(n,"-icon-loading")),delete o.spin,delete o.isIcon,i.a.createElement("svg",r()({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",width:"1em",height:"1em"},o),i.a.createElement("path",{d:"M5 24h38M24 5v38"}))}var f=i.a.forwardRef(m);f.defaultProps={isIcon:!0},f.displayName="IconPlus",t.a=f},646:function(e,t,n){"use strict";var a=n(5),r=n.n(a),c=n(4),o=n.n(c),u=n(0),i=n.n(u),l=n(6);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){var n=Object(u.useContext)(l.a).prefixCls,a=e.spin,c=e.className,o=d(d({ref:t},e),{},{className:"".concat(c?c+" ":"").concat(n,"-icon ").concat(n,"-icon-minus")});return a&&(o.className="".concat(o.className," ").concat(n,"-icon-loading")),delete o.spin,delete o.isIcon,i.a.createElement("svg",r()({fill:"none",stroke:"currentColor",strokeWidth:"4",viewBox:"0 0 48 48",width:"1em",height:"1em"},o),i.a.createElement("path",{d:"M5 24h38"}))}var f=i.a.forwardRef(m);f.defaultProps={isIcon:!0},f.displayName="IconMinus",t.a=f}}]);