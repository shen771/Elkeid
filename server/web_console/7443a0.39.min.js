(window.webpackJsonp=window.webpackJsonp||[]).push([[39,76],{154:function(e,t,a){"use strict";a.r(t);a(300);var n,r=a(211),u=(a(572),a(573)),o=(a(299),a(74)),l=a(4),i=a.n(l),c=a(20),s=a.n(c),d=a(41),p=a.n(d),m=(a(306),a(89)),f=a(578),b=a.n(f),v=a(26),g=a.n(v),y=a(0),O=a.n(y),h=a(550),k=a(579),_=a(308),E=a(557),j=a(556),T="/data00/webprojectdev/hids_open/src/pages/create-task/task-setting/index.tsx";function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=Object(k.a)(m.a)(n||(n=b()(["\n  padding: 20px;\n\n  .arco-form-label-item {\n    width: 92px;\n    flex: unset;\n  }\n  .arco-form-item-wrapper {\n    width: 444px;\n    flex: unset;\n  }\n"]))),w=Object(y.forwardRef)((function(e,t){var a=e.visible,n=e.filter,l=e.setFilter,i=Object(h.a)(p()(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.GetCompList)({data:{},params:{page:1,page_size:99}});case 2:return t=e.sent,e.abrupt("return",null==t?void 0:t.data);case 4:case"end":return e.stop()}}),e)}))),{auto:!0}).data,c=void 0===i?[]:i,d=m.a.useForm(),f=s()(d,1)[0];return Object(y.useEffect)((function(){a&&f.setFieldsValue(n)}),[a]),Object(y.useImperativeHandle)(t,(function(){return{handleCheckFormValid:(e=p()(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.validate();case 2:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})};var e})),O.a.createElement(C,{form:f,colon:!1,labelAlign:"right",onChange:function(e,t){if(null!=e&&e.action)return l((function(e){return N(N(N({},e),t),{},{module_id:void 0})})),void f.setFieldValue("module_id",void 0);l((function(e){return N(N({},e),t)}))},__source:{fileName:T,lineNumber:64,columnNumber:5}},O.a.createElement(m.a.Item,{field:"task_name",label:"任务名称",rules:[{required:!0,message:"请输入任务名称"}],__source:{fileName:T,lineNumber:85,columnNumber:7}},O.a.createElement(o.a,{style:{width:"300px"},placeholder:"请输入任务名称",__source:{fileName:T,lineNumber:95,columnNumber:9}})),O.a.createElement(m.a.Item,{field:"action",label:"任务类型",rules:[{required:!0,message:"请选择任务类型"}],__source:{fileName:T,lineNumber:97,columnNumber:7}},O.a.createElement(u.a.Group,{type:"button",name:"lang",options:_.taskTypeOptions,__source:{fileName:T,lineNumber:107,columnNumber:9}})),O.a.createElement(m.a.Item,{shouldUpdate:!0,noStyle:!0,__source:{fileName:T,lineNumber:109,columnNumber:7}},(function(e){var t=e.action!==j.TaskTypeEunm.agt_reboot,a=e.action===j.TaskTypeEunm.agt_update,n=a?"agent":"插件",u=a?c.filter((function(e){return e.module_type===E.CompTypeEnum.agent})):c.filter((function(e){return e.module_type===E.CompTypeEnum.plugin}));return t?O.a.createElement(m.a.Item,{field:"module_id",label:"选择".concat(n),rules:[{required:!0,message:"请选择".concat(n)}],__source:{fileName:T,lineNumber:122,columnNumber:15}},O.a.createElement(r.a,{placeholder:"请选择".concat(n),style:{width:240},__source:{fileName:T,lineNumber:132,columnNumber:17}},u.map((function(e){return O.a.createElement(r.a.Option,{key:e.module_id,value:e.module_id,__source:{fileName:T,lineNumber:134,columnNumber:21}},"".concat(e.module_name," - ").concat(e.module_version))})))):null})))}));t.default=w},308:function(e,t,a){"use strict";a.r(t),a.d(t,"selectTypeInputOptions",(function(){return r})),a.d(t,"taskTypeOptions",(function(){return u})),a.d(t,"taskStatusOptions",(function(){return o})),a.d(t,"subTaskStatusOptions",(function(){return l}));var n=a(556),r=[{label:"任务名称",value:"task_name"},{label:"创建人",value:"task_user"}],u=[{label:"升级agent",text:"升级agent",value:n.TaskTypeEunm.agt_update},{label:"重启agent",text:"重启agent",value:n.TaskTypeEunm.agt_reboot},{label:"升级插件",text:"升级插件",value:n.TaskTypeEunm.plu_update},{label:"加载插件",text:"加载插件",value:n.TaskTypeEunm.plu_install},{label:"卸载插件",text:"卸载插件",value:n.TaskTypeEunm.plu_uninstall}],o=[{label:"未运行",text:"未运行",value:n.TaskStatusEunm.created,color:"#C9CDD4"},{label:"运行中",text:"运行中",value:n.TaskStatusEunm.running,color:"#1664FF"},{label:"运行成功",text:"运行成功",value:n.TaskStatusEunm.finished,color:"#00AA2A"},{label:"已停止",text:"已停止",value:n.TaskStatusEunm.cancelled,color:"#E63F3F"}],l=[{label:"未执行",text:"未执行",value:n.TaskStatusEunm.created,color:"#C9CDD4"},{label:"执行中",text:"执行中",value:n.SubTaskStatusEnum.running,color:"#1664FF"},{label:"执行成功",text:"执行成功",value:n.SubTaskStatusEnum.succeed,color:"#00AA2A"},{label:"执行失败",text:"执行失败",value:n.SubTaskStatusEnum.failed,color:"#E63F3F"}]},556:function(e,t,a){"use strict";a.r(t),a.d(t,"TaskStatusEunm",(function(){return n})),a.d(t,"SubTaskStatusEnum",(function(){return r})),a.d(t,"TaskTypeEunm",(function(){return u})),a.d(t,"GetTaskList",(function(){return l})),a.d(t,"GetTaskInfo",(function(){return i})),a.d(t,"GetSubTaskList",(function(){return c})),a.d(t,"GetTaskHostStatus",(function(){return s})),a.d(t,"OperateTask",(function(){return d})),a.d(t,"CreateAgentTask",(function(){return p})),a.d(t,"CreatePluginTask",(function(){return m})),a.d(t,"GetModuleId",(function(){return f}));var n,r,u,o=a(40);!function(e){e.running="running",e.created="created",e.finished="finished",e.cancelled="cancelled"}(n||(n={})),function(e){e.created="created",e.running="running",e.failed="failed",e.succeed="succeed"}(r||(r={})),function(e){e.plu_update="plu_update",e.plu_install="plu_install",e.plu_uninstall="plu_uninstall",e.agt_update="agt_update",e.agt_reboot="agt_reboot"}(u||(u={}));var l=function(e){var t=e.data,a=e.params;return Object(o.b)({method:"post",url:"/api/v6/agent/getTaskList",data:t,params:a},"获取任务列表")},i=function(e){var t=e.params;return Object(o.b)({method:"get",url:"/api/v6/agent/getTask/".concat(t.task_id)},"获取任务基本信息")},c=function(e){var t=e.data,a=e.params;return Object(o.b)({method:"post",url:"/api/v6/agent/getSubTaskList",data:t,params:a},"获取子任务列表")},s=function(e){var t=e.data;return Object(o.b)({method:"post",url:"/api/v6/agent/GetErrorHostNum",data:t},"获取创建任务主机状态",!1,!1)},d=function(e){var t=e.data;return Object(o.b)({method:"post",url:"/api/v6/agent/controlTask",data:t},"运行任务",!0)},p=function(e){var t=e.data;return Object(o.b)({method:"post",url:"/api/v6/agent/createAgentTask",data:t},"创建agent任务",!0)},m=function(e){var t=e.data;return Object(o.b)({method:"post",url:"/api/v6/agent/createPluTask",data:t},"创建插件任务",!0)},f=function(e){var t=e.data;return Object(o.b)({method:"post",url:"/api/v6/module/GetModuleId",data:t},"获取组件id",!1,!1)}},557:function(e,t,a){"use strict";a.r(t),a.d(t,"CompTypeEnum",(function(){return n})),a.d(t,"PlugTypeEnum",(function(){return r})),a.d(t,"GetCompList",(function(){return o})),a.d(t,"AddComp",(function(){return l})),a.d(t,"EditComp",(function(){return i})),a.d(t,"DeleteComp",(function(){return c}));var n,r,u=a(40);!function(e){e.agent="agent",e.plugin="plugin"}(n||(n={})),function(e){e.exec="exec",e.archive="archive"}(r||(r={}));var o=function(e){var t=e.data,a=e.params;return Object(u.b)({method:"post",url:"/api/v6/module/GetModuleList",data:t,params:a},"获取组件列表")},l=function(e){var t=e.data;return Object(u.b)({method:"post",url:"/api/v6/module/CreateModule",data:t},"新建组件",!0)},i=function(e){var t=e.data;return Object(u.b)({method:"post",url:"/api/v6/module/UpdateModule",data:t},"编辑组件",!0)},c=function(e){var t=e.data;return Object(u.b)({method:"post",url:"/api/v6/module/DeleteModule",data:t},"删除组件",!0)}},572:function(e,t,a){"use strict";a(13),a(608)},573:function(e,t,a){"use strict";var n=a(607);t.a=n.a},607:function(e,t,a){"use strict";var n=a(0),r=a.n(n),u=a(1),o=a(2),l=a(3),i=a(10),c=a(7),s=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,u=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=u.next()).done;)o.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}return o},d=Object(n.createContext)({type:"radio"}),p={type:"radio",mode:"outline",direction:"horizontal"};function m(e){var t,a=Object(n.useContext)(l.a),m=a.getPrefixCls,f=a.size,b=a.componentConfig,v=Object(c.a)(e,p,null==b?void 0:b["Radio.Group"]),g=v.style,y=v.className,O=v.name,h=v.children,_=v.direction,E=v.type,j=v.mode,T=v.options,x=v.disabled,N=s(Object(i.a)(void 0,{defaultValue:v.defaultValue,value:v.value}),2),C=N[0],w=N[1],S=v.size||f,P=m("radio"),F=Object(u.a)(P+"-group",((t={})[P+"-group-type-button"]="radio"!==E,t[P+"-size-"+S]=!!S,t[P+"-mode-"+j]=!!j,t[P+"-group-disabled"]=x,t[P+"-group-direction-vertical"]="vertical"===_,t),y),G={onChangeValue:function(e,t){var a=v.onChange;e!==C&&("value"in v||w(e),a&&a(e,t))},type:E,value:C,disabled:x,group:!0,name:O};return r.a.createElement(d.Provider,{value:G},r.a.createElement("div",{className:F,style:g},T&&Object(o.a)(T)?T.map((function(e,t){return Object(o.e)(e)?r.a.createElement(k,{key:e.value,disabled:x||e.disabled,value:e.value},e.label):r.a.createElement(k,{key:t,value:e,disabled:x},e)})):h))}m.displayName="RadioGroup";var f=m,b=a(9),v=a(23),g=function(){return(g=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},y=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},O=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,u=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=u.next()).done;)o.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}return o};function h(e){var t,a=Object(n.useContext)(l.a),o=a.getPrefixCls,s=a.componentConfig,p=Object(c.a)(e,{},null==s?void 0:s.Radio),m=Object(n.useContext)(d),f=o("radio"),h=g({},p);m.group&&(h.checked=m.value===p.value,h.disabled=!(!m.disabled&&!p.disabled));var k=h.disabled,_=h.children,E=h.value,j=h.style,T=h.className,x=y(h,["disabled","children","value","style","className"]),N=O(Object(i.a)(!1,{value:h.checked,defaultValue:h.defaultChecked}),2),C=N[0],w=N[1],S=Object(u.a)(f+("button"===m.type?"-button":""),((t={})[f+"-checked"]=C,t[f+"-disabled"]=k,t),T);return r.a.createElement("label",g({},Object(b.a)(x,["checked","onChange"]),{style:j,className:S}),r.a.createElement("input",g({disabled:k,value:E||"",type:"radio"},m.name?{name:m.name}:{},{checked:C,onChange:function(e){e.persist(),function(e){var t=h.onChange,a=h.value;k||(m.group?m.onChangeValue&&m.onChangeValue(a,e):"checked"in p||C||w(!0),!C&&t&&t(!0,e))}(e)},onClick:function(e){e.stopPropagation()}})),"radio"===m.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{prefix:f,className:f+"-mask-wrapper",disabled:C||k},r.a.createElement("div",{className:f+"-mask"})),_&&r.a.createElement("span",{className:f+"-text"},_)),"button"===m.type&&r.a.createElement("span",{className:f+"-button-inner"},_))}h.__BYTE_RADIO=!0,h.displayName="Radio",h.Group=f;var k=t.a=h},608:function(e,t,a){}}]);